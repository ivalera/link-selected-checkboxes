(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function r(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(e){if(e.ep)return;e.ep=!0;const t=r(e);fetch(e.href,t)}})();let s=[];document.getElementById("checkbox-count").addEventListener("input",n=>{let o=n.target.value;o<0?n.target.value=0:o>100&&(n.target.value=100),a()});function a(){const n=new URL(window.location);n.searchParams.set("categories",s.join(","));const o=document.getElementById("checkbox-count").value;n.searchParams.set("count",o||s.length),window.history.pushState({},"",n)}function u(){document.getElementById("selected").textContent=s.join(", ")}function f(n,o=!0){const r=document.getElementById("checkboxes");r.innerHTML="",o&&(s=[]),a(),u();for(let c=1;c<=n;c++){const e=document.createElement("input");e.type="checkbox",e.id=`cat${c}`,e.value=c,e.addEventListener("change",l=>{const d=l.target.value;l.target.checked?s.push(d):s=s.filter(m=>m!==d),a(),u()});const t=document.createElement("label");t.htmlFor=`cat${c}`,t.textContent=` Категория ${c}`;const i=document.createElement("br");r.appendChild(e),r.appendChild(t),r.appendChild(i)}}function h(){const n=new URLSearchParams(window.location.search),o=n.get("categories"),r=n.get("count"),c=r?parseInt(r,10):5;document.getElementById("checkbox-count").value=c,o&&(s=o.split(",")),f(c,!1),o&&(s.forEach(e=>{const t=document.querySelector(`input[value="${e}"]`);t&&(t.checked=!0)}),u())}document.getElementById("category-form").addEventListener("submit",n=>{n.preventDefault();const o=document.getElementById("checkbox-count").value;f(o)});h();
